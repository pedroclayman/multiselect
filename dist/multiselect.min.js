!function(){function e(e){var t="focus"===e.type?"focusin":"focusout",n=new CustomEvent(t,{bubbles:!0,cancelable:!1});n.c1Generated=!0,e.target.dispatchEvent(n)}function t(n){n.c1Generated||(i.removeEventListener("focus",e,!0),i.removeEventListener("blur",e,!0),i.removeEventListener("focusin",t,!0),i.removeEventListener("focusout",t,!0)),setTimeout(function(){i.removeEventListener("focusin",t,!0),i.removeEventListener("focusout",t,!0)})}var n=window,i=n.document;void 0===n.onfocusin&&(i.addEventListener("focus",e,!0),i.addEventListener("blur",e,!0),i.addEventListener("focusin",t,!0),i.addEventListener("focusout",t,!0))}(),angular.module("multi-select",[]),Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(e){e=0===arguments.length||!!e;var t=this.parentNode,n=window.getComputedStyle(t,null),i=parseInt(n.getPropertyValue("border-top-width")),o=parseInt(n.getPropertyValue("border-left-width")),l=this.offsetTop-t.offsetTop<t.scrollTop,s=this.offsetTop-t.offsetTop+this.clientHeight-i>t.scrollTop+t.clientHeight,c=this.offsetLeft-t.offsetLeft<t.scrollLeft,r=this.offsetLeft-t.offsetLeft+this.clientWidth-o>t.scrollLeft+t.clientWidth,d=l&&!s;(l||s)&&e&&(t.scrollTop=this.offsetTop-t.offsetTop-t.clientHeight/2-i+this.clientHeight/2),(c||r)&&e&&(t.scrollLeft=this.offsetLeft-t.offsetLeft-t.clientWidth/2-o+this.clientWidth/2),(l||s||c||r)&&!e&&this.scrollIntoView(d)}),angular.module("multi-select").directive("multiSelectChoices",["constants","$timeout",function(e,t){function n(e){}return{restrict:"E",require:["^multiSelect","multiSelectChoices","scrollTo"],templateUrl:"multiSelect/choices",scope:!0,link:function(n,i,o,l){function s(){n.currentIndex=n.filteredChoices&&n.filteredChoices.length>0?0:-1}function c(e){n.selectItem(e),s(),n.options.closeOnSelect&&(n.options.isOpen=!1),n.options.resetInput&&n.resetInput()}var r=l[0],d=l[1],u=l[2];r.registerCtrl("choices",d),n.currentIndex=0,n.filteredChoices=[],d.handleEvent=function(i){switch(i.keyCode){case e.KEY.DOWN:n.options.isOpen?(n.currentIndex=(n.currentIndex+1)%n.filteredChoices.length,t(function(){u.scrollTo(".selected")})):(n.options.isOpen=!0,n.currentIndex=0);break;case e.KEY.UP:n.currentIndex=n.currentIndex-1<0?n.filteredChoices.length-1:n.currentIndex-1,t(function(){u.scrollTo(".selected")});break;case e.KEY.ENTER:n.options.isOpen&&c(n.filteredChoices[n.currentIndex]);break;case e.KEY.ESC:n.options.isOpen=!1}},n.$watch("options.search",function(e,t){e!==t&&(s(),e&&e.length&&(n.options.isOpen=!0))}),n.choiceClicked=function(e,t){c(e)},n.$on("$destroy",function(){r.unregisterCtrl("choices")})},controller:["$scope",n]}}]),angular.module("multi-select").filter("unselected",[function(){return function(e,t){return null==t?e:e.filter(function(e){return t.indexOf(e)===-1})}}]),angular.module("multi-select").constant("constants",{KEY:{LEFT:37,RIGHT:39,UP:38,DOWN:40,TAB:9,BACKSPACE:8,DELETE:46,ENTER:13,ESC:27}}),angular.module("multi-select").directive("multiSelect",["constants","$parse",function(e,t){function n(){return Event.prototype.hasOwnProperty("path")}function i(){}return{restrict:"E",templateUrl:"multiSelect/main",require:["ngModel","multiSelect"],scope:{choices:"=",placeholder:"@",model:"=ngModel"},controller:["$scope",i],compile:function(t,i){var o=[];return{pre:function(e,t,n,i){var l=i[0],s=i[1];s.open=function(){e.options.isOpen=!0},s.close=function(){e.options.isOpen=!1},s.registerCtrl=function(e,t){o[e]=t},s.unregisterCtrl=function(e){var t=o.indexOf(e);t!==-1&&o.splice(t,-1)},s.selectItem=e.selectItem=function(t){null==l.$modelValue?e.model=[t]:e.model.push(t)},s.unselectItem=e.unselectItem=function(e){if(null!=l.$modelValue){var t=l.$modelValue,n=t.indexOf(e);n>-1&&t.splice(n,1)}},s.resetInput=e.resetInput=function(){e.options.search=""}},post:function(t,i,l,s){function c(n){~[e.KEY.LEFT].indexOf(n.keyCode)?0==p.selectionStart&&o.pills.handleEvent(n):~[e.KEY.RIGHT].indexOf(n.keyCode)?0==p.selectionStart&&t.options.selectedPillIndex!==-1&&o.pills.handleEvent(n):~[e.KEY.BACKSPACE,e.KEY.DELETE].indexOf(n.keyCode)?o.pills.handleEvent(n):~[e.KEY.UP,e.KEY.DOWN,e.KEY.ENTER,e.KEY.ESC].indexOf(n.keyCode)&&o.choices.handleEvent(n),t.$apply()}function r(e){n()||(null==e.path&&(e.path=[]),e.path.push(p))}function d(n){~[e.KEY.LEFT,e.KEY.RIGHT].indexOf(n.keyCode)&&0==p.selectionStart&&t.options.selectedPillIndex!==-1&&n.preventDefault(),~[e.KEY.TAB].indexOf(n.keyCode)&&t.$apply(function(){t.options.selectedPillIndex=-1})}function u(e){function o(){if(e.path){var t=e.path.filter(function(e){return e===p});return t.length>0}return!1}n()||(null==e.path&&(e.path=[]),e.path.push(i[0])),!t.options.isOpen&&o()&&t.$apply(function(){t.options.isOpen=!0})}function a(e){function n(){if(e.path){var t=e.path.filter(function(e){return e===i[0]});return t.length>0}return!1}t.options.isOpen===!1||n()||t.$apply(function(){t.options.isOpen=!1})}function f(){t.options.closeOnSelect=!0,t.options.resetInput=!0,l.$observe("closeOnSelect",function(e){t.options.closeOnSelect=null==e||t.$eval(e)}),l.$observe("resetInput",function(e){t.options.resetInput=null==e||t.$eval(e)})}var p=i[0].querySelector("input[type=search]");s[0],s[1];t.options={selectedPillIndex:-1,search:""},f(l),i[0].addEventListener("keydown",c),p.addEventListener("click",r),p.addEventListener("focusin",r),p.addEventListener("keydown",d),i[0].addEventListener("click",u),i[0].addEventListener("focusin",u);var h=document.querySelector("body");h.addEventListener("focusin",a),h.addEventListener("click",a),t.$on("$destroy",function(){p.removeEventListener("click",r),p.removeEventListener("focusin",r),p.removeEventListener("keydown",d),i[0].removeEventListener("keydown",c),i[0].removeEventListener("focusin",u),i[0].removeEventListener("click",u),h.removeEventListener("focusin",a),h.removeEventListener("click",a)})}}}}}]),angular.module("multi-select").directive("multiSelect",["resizeSensor","$window",function(e,t){return{link:function(n,i,o,l){function s(){var e=i[0].querySelectorAll(".pills li");if(e.length>0){var n=e[e.length-1],o=i[0].querySelector(".pills").getBoundingClientRect(),l=n.getBoundingClientRect(),s=parseFloat(t.getComputedStyle(i[0]).width),d=l.right-o.left;s-d>c?r.style.width=s-d+"px":r.style.width="100%"}else r.style.width="100%"}var c=50,r=i[0].querySelector("input[type=search]");e(i[0],s),n.$on("$destroy",function(){e.detach(i[0],s)})}}}]),angular.module("multi-select").run(["$templateCache",function(e){e.put("multiSelect/main",'<multi-select-pills></multi-select-pills><input type="search" ng-model="options.search" placeholder="{{placeholder}}" /><multi-select-choices tabindex="-1" scroll-to></multi-select-choices>'),e.put("multiSelect/pills",'<ul class="pills" ng-show="model != null && model.length"><li ng-class="{\'selected\' : $index === options.selectedPillIndex }" ng-repeat="item in model">{{item}}&nbsp;<a tabindex="-1" href ng-click="unselectItem(item)">x</a></li></ul>'),e.put("multiSelect/choices",'<ul class="choices" ng-show="options.isOpen" tabindex="-1"><li ng-repeat="item in choices | filter : options.search | unselected : model as filteredChoices" ng-class="{\'selected\' : $index === currentIndex }"><a tabindex="-1" ng-click="choiceClicked(item, $event)">{{item}}</a></li></ul>')}]),angular.module("multi-select").directive("multiSelectPills",["constants",function(e){function t(){}return{restrict:"E",require:["^multiSelect","multiSelectPills"],templateUrl:"multiSelect/pills",link:function(t,n,i,o){var l=o[0],s=o[1];l.registerCtrl("pills",s),s.handleEvent=function(n){var i=t.model?t.model.length:0;switch(n.keyCode){case e.KEY.LEFT:t.options.selectedPillIndex===-1?t.options.selectedPillIndex=i-1:t.options.selectedPillIndex>0&&t.options.selectedPillIndex--;break;case e.KEY.RIGHT:t.options.selectedPillIndex<i-1?t.options.selectedPillIndex++:t.options.selectedPillIndex===i-1&&(t.options.selectedPillIndex=-1);break;case e.KEY.BACKSPACE:t.options.selectedPillIndex>-1&&(t.model.splice(t.options.selectedPillIndex,1),0===i?t.options.selectedPillIndex=-1:t.options.selectedPillIndex>0&&t.options.selectedPillIndex--);break;case e.KEY.DELETE:t.options.selectedPillIndex>-1&&(t.model.splice(t.options.selectedPillIndex,1),0===i?t.options.selectedPillIndex=-1:t.options.selectedPillIndex>i-1&&t.options.selectedPillIndex--)}},t.$on("$destroy",function(){l.unregisterCtrl("pills")})},controller:[t]}}]),angular.module("multi-select").factory("resizeSensor",[function(){function e(e,t){var n=Object.prototype.toString.call(e),i="[object Array]"===n||"[object NodeList]"===n||"[object HTMLCollection]"===n||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements,o=0,l=e.length;if(i)for(;o<l;o++)t(e[o]);else t(e)}var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame,n=function(i,o){function l(){var e=[];this.add=function(t){e.push(t)};var t,n;this.call=function(){for(t=0,n=e.length;t<n;t++)e[t].call()},this.remove=function(i){var o=[];for(t=0,n=e.length;t<n;t++)e[t]!==i&&o.push(e[t]);e=o},this.length=function(){return e.length}}function s(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(t):e.style[t]}function c(e,n){if(e.resizedAttached){if(e.resizedAttached)return void e.resizedAttached.add(n)}else e.resizedAttached=new l,e.resizedAttached.add(n);e.resizeSensor=document.createElement("div"),e.resizeSensor.className="resize-sensor";var i="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",o="position: absolute; left: 0; top: 0; transition: 0s;";e.resizeSensor.style.cssText=i,e.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+i+'"><div style="'+o+'"></div></div><div class="resize-sensor-shrink" style="'+i+'"><div style="'+o+' width: 200%; height: 200%"></div></div>',e.appendChild(e.resizeSensor),"static"==s(e,"position")&&(e.style.position="relative");var c=e.resizeSensor.childNodes[0],r=c.childNodes[0],d=e.resizeSensor.childNodes[1],u=function(){r.style.width=1e5+"px",r.style.height=1e5+"px",c.scrollLeft=1e5,c.scrollTop=1e5,d.scrollLeft=1e5,d.scrollTop=1e5};u();var a=!1,f=function(){e.resizedAttached&&(a&&(e.resizedAttached.call(),a=!1),t(f))};t(f);var p,h,m,v,E=function(){(m=e.offsetWidth)==p&&(v=e.offsetHeight)==h||(a=!0,p=m,h=v),u()},g=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)};g(c,"scroll",E),g(d,"scroll",E)}e(i,function(e){c(e,o)}),this.detach=function(e){n.detach(i,e)}};return n.detach=function(t,n){e(t,function(e){e.resizedAttached&&"function"==typeof n&&(e.resizedAttached.remove(n),e.resizedAttached.length())||e.resizeSensor&&(e.contains(e.resizeSensor)&&e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached)})},n}]),angular.module("multi-select").directive("scrollTo",[function(){function e(){}return{restrict:"A",scope:!1,require:["scrollTo"],controller:[e],link:function(e,t,n,i){var o=i[0];o.scrollTo=function(e){var n=t[0].querySelector(e);n&&n.scrollIntoViewIfNeeded()}}}}]);