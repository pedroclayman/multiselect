!function(){function e(e){var t="focus"===e.type?"focusin":"focusout",n=new CustomEvent(t,{bubbles:!0,cancelable:!1});n.c1Generated=!0,e.target.dispatchEvent(n)}function t(n){n.c1Generated||(i.removeEventListener("focus",e,!0),i.removeEventListener("blur",e,!0),i.removeEventListener("focusin",t,!0),i.removeEventListener("focusout",t,!0)),setTimeout(function(){i.removeEventListener("focusin",t,!0),i.removeEventListener("focusout",t,!0)})}var n=window,i=n.document;void 0===n.onfocusin&&(i.addEventListener("focus",e,!0),i.addEventListener("blur",e,!0),i.addEventListener("focusin",t,!0),i.addEventListener("focusout",t,!0))}(),angular.module("multi-select",[]),Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(e){e=0===arguments.length||!!e;var t=this.parentNode,n=window.getComputedStyle(t,null),i=parseInt(n.getPropertyValue("border-top-width")),o=parseInt(n.getPropertyValue("border-left-width")),l=this.offsetTop-t.offsetTop<t.scrollTop,c=this.offsetTop-t.offsetTop+this.clientHeight-i>t.scrollTop+t.clientHeight,s=this.offsetLeft-t.offsetLeft<t.scrollLeft,r=this.offsetLeft-t.offsetLeft+this.clientWidth-o>t.scrollLeft+t.clientWidth,u=l&&!c;(l||c)&&e&&(t.scrollTop=this.offsetTop-t.offsetTop-t.clientHeight/2-i+this.clientHeight/2),(s||r)&&e&&(t.scrollLeft=this.offsetLeft-t.offsetLeft-t.clientWidth/2-o+this.clientWidth/2),(l||c||s||r)&&!e&&this.scrollIntoView(u)}),angular.module("multi-select").directive("multiSelectChoices",["constants","$timeout",function(e,t){function n(e){}return{restrict:"E",require:["^multiSelect","multiSelectChoices","scrollTo"],templateUrl:"multiSelect/choices",scope:!0,link:function(n,i,o,l){function c(){n.currentIndex=n.filteredChoices.length>0?0:-1}function s(e){n.selectItem(e),c(),n.options.closeOnSelect&&(n.options.isOpen=!1)}var r=l[0],u=l[1],f=l[2];r.registerCtrl("choices",u),n.currentIndex=0,n.filteredChoices=[],u.handleEvent=function(i){switch(i.keyCode){case e.KEY.DOWN:n.options.isOpen?(n.currentIndex=(n.currentIndex+1)%n.filteredChoices.length,t(function(){f.scrollTo(".selected")})):(n.options.isOpen=!0,n.currentIndex=0);break;case e.KEY.UP:n.currentIndex=n.currentIndex-1<0?n.filteredChoices.length-1:n.currentIndex-1,t(function(){f.scrollTo(".selected")});break;case e.KEY.ENTER:n.options.isOpen&&s(n.filteredChoices[n.currentIndex])}},n.$watch("options.searchTerm",function(){c()}),n.choiceClicked=function(e){s(e)},n.$on("$destroy",function(){r.unregisterCtrl("choices")})},controller:["$scope",n]}}]),angular.module("multi-select").filter("unselected",[function(){return function(e,t){return t?e.filter(function(e){return t.indexOf(e)===-1}):e}}]),angular.module("multi-select").constant("constants",{KEY:{LEFT:37,RIGHT:39,UP:38,DOWN:40,TAB:9,BACKSPACE:8,DELETE:46,ENTER:13}}),angular.module("multi-select").directive("multiSelect",["constants","$parse",function(e,t){function n(){}return{restrict:"E",templateUrl:"multiSelect/main",require:["ngModel","multiSelect"],scope:{choices:"=",model:"=ngModel"},controller:["$scope",n],compile:function(){var t=[];return{pre:function(e,n,i,o){var l=o[0],c=o[1];c.open=function(){e.options.isOpen=!0},c.close=function(){e.options.isOpen=!1},c.registerCtrl=function(e,n){t[e]=n},c.unregisterCtrl=function(e){var n=t.indexOf(e);n!==-1&&t.splice(n,-1)},c.getItems=e.getItems=function(){return l.$modelValue},c.selectItem=e.selectItem=function(t){null==l.$modelValue?e.model=[t]:e.model.push(t)},c.unselectItem=e.unselectItem=function(e){if(null!=l.$modelValue){var t=l.$modelValue,n=t.indexOf(e);n>-1&&t.splice(n,1)}}},post:function(n,i,o,l){function c(i){~[e.KEY.LEFT,e.KEY.RIGHT,e.KEY.BACKSPACE,e.KEY.DELETE].indexOf(i.keyCode)?t.pills.handleEvent(i):~[e.KEY.UP,e.KEY.DOWN,e.KEY.ENTER].indexOf(i.keyCode)&&t.choices.handleEvent(i),n.$apply()}function s(e){n.options.isOpen||n.$apply(function(){n.options.isOpen=!0})}function r(e){n.options.isOpen&&!i[0].contains(e.target)&&n.$apply(function(){n.options.isOpen=!1})}function u(){o.$observe("closeOnSelect",function(e){n.options.closeOnSelect=null==e||n.$eval(e)})}l[0],l[1];n.options={},u(o),i[0].addEventListener("keydown",c);i[0].querySelector("input[type=search]");i[0].addEventListener("click",s),i[0].addEventListener("focusin",s);var f=document.querySelector("body");f.addEventListener("focusin",r),f.addEventListener("click",r),n.$on("$destroy",function(){i[0].removeEventListener("keydown",c),i[0].removeEventListener("focusin",s),i[0].removeEventListener("click",s),f.removeEventListener("focusin",r),f.removeEventListener("click",r)})}}}}}]),angular.module("multi-select").run(["$templateCache",function(e){e.put("multiSelect/main",'<multi-select-pills></multi-select-pills><input type="search" ng-model="options.search" /><multi-select-choices tabindex="-1" scroll-to></multi-select-choices>'),e.put("multiSelect/pills",'<ul class="pills" ng-show="getItems().length"><li ng-repeat="item in getItems()">{{item}}&nbsp;<a tabindex="-1" href ng-click="unselectItem(item)">x</a></li></ul>'),e.put("multiSelect/choices",'<ul class="choices" ng-show="options.isOpen" tabindex="-1"><li ng-repeat="item in choices | filter : options.search | unselected : getItems() as filteredChoices" ng-class="{\'selected\' : $index === currentIndex }"><a tabindex="-1" ng-click="choiceClicked(item)">{{item}}</a></li></ul>')}]),angular.module("multi-select").directive("multiSelectPills",[function(){function e(){}return{restrict:"E",require:["^multiSelect","multiSelectPills"],templateUrl:"multiSelect/pills",link:function(e,t,n,i){var o=i[0],l=i[1];o.registerCtrl("pills",l),l.handleEvent=function(e){console.log("pills")},e.$on("$destroy",function(){o.unregisterCtrl("pills")})},controller:[e]}}]),angular.module("multi-select").directive("scrollTo",[function(){function e(){}return{restrict:"A",scope:!1,require:["scrollTo"],controller:[e],link:function(e,t,n,i){var o=i[0];o.scrollTo=function(e){var n=t[0].querySelector(e);n.scrollIntoViewIfNeeded()}}}}]);