!function(){function e(e){var t="focus"===e.type?"focusin":"focusout",n=new CustomEvent(t,{bubbles:!0,cancelable:!1});n.c1Generated=!0,e.target.dispatchEvent(n)}function t(n){n.c1Generated||(i.removeEventListener("focus",e,!0),i.removeEventListener("blur",e,!0),i.removeEventListener("focusin",t,!0),i.removeEventListener("focusout",t,!0)),setTimeout(function(){i.removeEventListener("focusin",t,!0),i.removeEventListener("focusout",t,!0)})}var n=window,i=n.document;void 0===n.onfocusin&&(i.addEventListener("focus",e,!0),i.addEventListener("blur",e,!0),i.addEventListener("focusin",t,!0),i.addEventListener("focusout",t,!0))}(),angular.module("multi-select",[]),angular.module("multi-select").directive("multiSelectChoices",["constants",function(e){function t(e){}return{restrict:"E",require:["^multiSelect","multiSelectChoices"],templateUrl:"multiSelect/choices",scope:!0,link:function(t,n,i,c){function o(){t.currentIndex=t.filteredChoices.length>0?0:-1}function l(e){t.selectItem(e),o(),t.options.closeOnSelect&&(t.options.isOpen=!1)}var s=c[0],r=c[1];s.registerCtrl("choices",r),t.currentIndex=0,t.filteredChoices=[],r.handleEvent=function(n){switch(n.keyCode){case e.KEY.DOWN:t.options.isOpen?t.currentIndex=(t.currentIndex+1)%t.filteredChoices.length:(t.options.isOpen=!0,t.currentIndex=0);break;case e.KEY.UP:t.currentIndex=t.currentIndex-1<0?t.filteredChoices.length-1:t.currentIndex-1;break;case e.KEY.ENTER:t.options.isOpen&&l(t.filteredChoices[t.currentIndex])}},t.$watch("options.searchTerm",function(){o()}),t.choiceClicked=function(e){l(e)},t.$on("$destroy",function(){s.unregisterCtrl("choices")})},controller:["$scope",t]}}]),angular.module("multi-select").filter("unselected",[function(){return function(e,t){return e.filter(function(e){return t.indexOf(e)===-1})}}]),angular.module("multi-select").constant("constants",{KEY:{LEFT:37,RIGHT:39,UP:38,DOWN:40,TAB:9,BACKSPACE:8,DELETE:46,ENTER:13}}),angular.module("multi-select").directive("multiSelect",["constants",function(e){function t(){}var n=[];return{restrict:"E",templateUrl:"multiSelect/main",require:["ngModel","multiSelect"],scope:{choices:"="},controller:["$scope",t],compile:function(){return{pre:function(e,t,i,c){var o=c[0],l=c[1];l.open=function(){e.options.isOpen=!0},l.close=function(){e.options.isOpen=!1},l.registerCtrl=function(e,t){n[e]=t},l.unregisterCtrl=function(e){var t=n.indexOf(e);t!==-1&&n.splice(t,-1)},l.getItems=e.getItems=function(){return o.$modelValue},l.selectItem=e.selectItem=function(e){o.$modelValue.push(e)},l.unselectItem=e.unselectItem=function(e){var t=o.$modelValue,n=t.indexOf(e);n>-1&&t.splice(n,1)}},post:function(t,i,c,o){function l(i){~[e.KEY.LEFT,e.KEY.RIGHT,e.KEY.BACKSPACE,e.KEY.DELETE].indexOf(i.keyCode)?n.pills.handleEvent(i):~[e.KEY.UP,e.KEY.DOWN,e.KEY.ENTER].indexOf(i.keyCode)&&n.choices.handleEvent(i),t.$apply()}function s(e){e.stopPropagation(),t.options.isOpen||t.$apply(function(){t.options.isOpen=!0})}function r(e){t.options.isOpen&&t.$apply(function(){t.options.isOpen=!1})}function u(){c.$observe("closeOnSelect",function(e){t.options.closeOnSelect=null==e||t.$eval(e)})}o[0],o[1];t.options={},u(c),i[0].addEventListener("keydown",l);i[0].querySelector("input[type=search]");i[0].addEventListener("click",s),i[0].addEventListener("focusin",s);var a=document.querySelector("body");a.addEventListener("focusin",r),a.addEventListener("click",r),t.$on("$destroy",function(){i[0].removeEventListener("keydown",l),i[0].removeEventListener("focusin",s),i[0].removeEventListener("click",s),a.removeEventListener("focusin",r),a.removeEventListener("click",r)})}}}}}]),angular.module("multi-select").run(["$templateCache",function(e){e.put("multiSelect/main",'<multi-select-pills></multi-select-pills><input type="search" ng-model="options.search" /><multi-select-choices tabindex="-1"></multi-select-choices>'),e.put("multiSelect/pills",'<ul class="pills" ng-show="getItems().length"><li ng-repeat="item in getItems()">{{item}}&nbsp;<a tabindex="-1" href ng-click="unselectItem(item)">x</a></li></ul>'),e.put("multiSelect/choices",'<ul class="choices" ng-show="options.isOpen"><li ng-repeat="item in choices | filter : options.search | unselected : getItems() as filteredChoices" ng-class="{\'selected\' : $index === currentIndex }"><a href tabindex="-1" ng-click="choiceClicked(item)">{{item}}</a></li></ul>')}]),angular.module("multi-select").directive("multiSelectPills",[function(){function e(){}return{restrict:"E",require:["^multiSelect","multiSelectPills"],templateUrl:"multiSelect/pills",link:function(e,t,n,i){var c=i[0],o=i[1];c.registerCtrl("pills",o),o.handleEvent=function(e){console.log("pills")},e.$on("$destroy",function(){c.unregisterCtrl("pills")})},controller:[e]}}]);