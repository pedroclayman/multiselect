!function(){function e(e){var t="focus"===e.type?"focusin":"focusout",n=new CustomEvent(t,{bubbles:!0,cancelable:!1});n.c1Generated=!0,e.target.dispatchEvent(n)}function t(n){n.c1Generated||(l.removeEventListener("focus",e,!0),l.removeEventListener("blur",e,!0),l.removeEventListener("focusin",t,!0),l.removeEventListener("focusout",t,!0)),setTimeout(function(){l.removeEventListener("focusin",t,!0),l.removeEventListener("focusout",t,!0)})}var n=window,l=n.document;void 0===n.onfocusin&&(l.addEventListener("focus",e,!0),l.addEventListener("blur",e,!0),l.addEventListener("focusin",t,!0),l.addEventListener("focusout",t,!0))}(),angular.module("multi-select",[]),Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(e){e=0===arguments.length||!!e;var t=this.parentNode,n=window.getComputedStyle(t,null),l=parseInt(n.getPropertyValue("border-top-width")),i=parseInt(n.getPropertyValue("border-left-width")),o=this.offsetTop-t.offsetTop<t.scrollTop,s=this.offsetTop-t.offsetTop+this.clientHeight-l>t.scrollTop+t.clientHeight,c=this.offsetLeft-t.offsetLeft<t.scrollLeft,r=this.offsetLeft-t.offsetLeft+this.clientWidth-i>t.scrollLeft+t.clientWidth,u=o&&!s;(o||s)&&e&&(t.scrollTop=this.offsetTop-t.offsetTop-t.clientHeight/2-l+this.clientHeight/2),(c||r)&&e&&(t.scrollLeft=this.offsetLeft-t.offsetLeft-t.clientWidth/2-i+this.clientWidth/2),(o||s||c||r)&&!e&&this.scrollIntoView(u)}),angular.module("multi-select").directive("multiSelectChoices",["constants","$timeout",function(e,t){function n(e){}return{restrict:"E",require:["^multiSelect","multiSelectChoices","scrollTo"],templateUrl:"multiSelect/choices",scope:!0,link:function(n,l,i,o){function s(){n.currentIndex=n.filteredChoices&&n.filteredChoices.length>0?0:-1}function c(e){n.selectItem(e),s(),n.options.closeOnSelect&&(n.options.isOpen=!1),n.options.resetInput&&n.resetInput()}var r=o[0],u=o[1],d=o[2];r.registerCtrl("choices",u),n.currentIndex=0,n.filteredChoices=[],u.handleEvent=function(l){switch(l.keyCode){case e.KEY.DOWN:n.options.isOpen?(n.currentIndex=(n.currentIndex+1)%n.filteredChoices.length,t(function(){d.scrollTo(".selected")})):(n.options.isOpen=!0,n.currentIndex=0);break;case e.KEY.UP:n.currentIndex=n.currentIndex-1<0?n.filteredChoices.length-1:n.currentIndex-1,t(function(){d.scrollTo(".selected")});break;case e.KEY.ENTER:n.options.isOpen&&c(n.filteredChoices[n.currentIndex]);break;case e.KEY.ESC:n.options.isOpen=!1}},n.$watch("options.search",function(e,t){e!==t&&(s(),e&&e.length&&(n.options.isOpen=!0))}),n.choiceClicked=function(e,t){c(e)},n.$on("$destroy",function(){r.unregisterCtrl("choices")})},controller:["$scope",n]}}]),angular.module("multi-select").filter("unselected",[function(){return function(e,t){return null==t?e:e.filter(function(e){return t.indexOf(e)===-1})}}]),angular.module("multi-select").constant("constants",{KEY:{LEFT:37,RIGHT:39,UP:38,DOWN:40,TAB:9,BACKSPACE:8,DELETE:46,ENTER:13,ESC:27}}),angular.module("multi-select").directive("multiSelect",["constants","$parse",function(e,t){function n(){return Event.prototype.hasOwnProperty("path")}function l(){}return{restrict:"E",templateUrl:"multiSelect/main",require:["ngModel","multiSelect"],scope:{choices:"=",placeholder:"@",model:"=ngModel"},controller:["$scope",l],compile:function(){var t=[];return{pre:function(e,n,l,i){var o=i[0],s=i[1];s.open=function(){e.options.isOpen=!0},s.close=function(){e.options.isOpen=!1},s.registerCtrl=function(e,n){t[e]=n},s.unregisterCtrl=function(e){var n=t.indexOf(e);n!==-1&&t.splice(n,-1)},s.selectItem=e.selectItem=function(t){null==o.$modelValue?e.model=[t]:e.model.push(t)},s.unselectItem=e.unselectItem=function(e){if(null!=o.$modelValue){var t=o.$modelValue,n=t.indexOf(e);n>-1&&t.splice(n,1)}},s.resetInput=e.resetInput=function(){e.options.search=""}},post:function(l,i,o,s){function c(n){~[e.KEY.LEFT].indexOf(n.keyCode)?0==f.selectionStart&&t.pills.handleEvent(n):~[e.KEY.RIGHT].indexOf(n.keyCode)?0==f.selectionStart&&l.options.selectedPillIndex!==-1&&t.pills.handleEvent(n):~[e.KEY.BACKSPACE,e.KEY.DELETE].indexOf(n.keyCode)?t.pills.handleEvent(n):~[e.KEY.UP,e.KEY.DOWN,e.KEY.ENTER,e.KEY.ESC].indexOf(n.keyCode)&&t.choices.handleEvent(n),l.$apply()}function r(e){n()||(null==e.path&&(e.path=[]),e.path.push(f))}function u(t){~[e.KEY.LEFT,e.KEY.RIGHT].indexOf(t.keyCode)&&0==f.selectionStart&&l.options.selectedPillIndex!==-1&&t.preventDefault(),~[e.KEY.TAB].indexOf(t.keyCode)&&l.$apply(function(){l.options.selectedPillIndex=-1})}function d(e){function t(){if(e.path){var t=e.path.filter(function(e){return e===f});return t.length>0}return!1}n()||(null==e.path&&(e.path=[]),e.path.push(i[0])),!l.options.isOpen&&t()&&l.$apply(function(){l.options.isOpen=!0})}function p(e){function t(){if(e.path){var t=e.path.filter(function(e){return e===i[0]});return t.length>0}return!1}l.options.isOpen===!1||t()||l.$apply(function(){l.options.isOpen=!1})}function a(){l.options.closeOnSelect=!0,l.options.resetInput=!0,o.$observe("closeOnSelect",function(e){l.options.closeOnSelect=null==e||l.$eval(e)}),o.$observe("resetInput",function(e){l.options.resetInput=null==e||l.$eval(e)})}var f=i[0].querySelector("input[type=search]");s[0],s[1];l.options={selectedPillIndex:-1,search:""},a(o),i[0].addEventListener("keydown",c),f.addEventListener("click",r),f.addEventListener("focusin",r),f.addEventListener("keydown",u),i[0].addEventListener("click",d),i[0].addEventListener("focusin",d);var h=document.querySelector("body");h.addEventListener("focusin",p),h.addEventListener("click",p),l.$on("$destroy",function(){f.removeEventListener("click",r),f.removeEventListener("focusin",r),f.removeEventListener("keydown",u),i[0].removeEventListener("keydown",c),i[0].removeEventListener("focusin",d),i[0].removeEventListener("click",d),h.removeEventListener("focusin",p),h.removeEventListener("click",p)})}}}}}]),angular.module("multi-select").run(["$templateCache",function(e){e.put("multiSelect/main",'<multi-select-pills></multi-select-pills><input type="search" ng-model="options.search" placeholder="{{placeholder}}" /><multi-select-choices tabindex="-1" scroll-to></multi-select-choices>'),e.put("multiSelect/pills",'<ul class="pills" ng-show="model != null && model.length"><li ng-class="{\'selected\' : $index === options.selectedPillIndex }" ng-repeat="item in model">{{item}}&nbsp;<a tabindex="-1" href ng-click="unselectItem(item)">x</a></li></ul>'),e.put("multiSelect/choices",'<ul class="choices" ng-show="options.isOpen" tabindex="-1"><li ng-repeat="item in choices | filter : options.search | unselected : model as filteredChoices" ng-class="{\'selected\' : $index === currentIndex }"><a tabindex="-1" ng-click="choiceClicked(item, $event)">{{item}}</a></li></ul>')}]),angular.module("multi-select").directive("multiSelectPills",["constants",function(e){function t(){}return{restrict:"E",require:["^multiSelect","multiSelectPills"],templateUrl:"multiSelect/pills",link:function(t,n,l,i){var o=i[0],s=i[1];o.registerCtrl("pills",s),s.handleEvent=function(n){var l=t.model?t.model.length:0;switch(n.keyCode){case e.KEY.LEFT:t.options.selectedPillIndex===-1?t.options.selectedPillIndex=l-1:t.options.selectedPillIndex>0&&t.options.selectedPillIndex--;break;case e.KEY.RIGHT:t.options.selectedPillIndex<l-1?t.options.selectedPillIndex++:t.options.selectedPillIndex===l-1&&(t.options.selectedPillIndex=-1);break;case e.KEY.BACKSPACE:t.options.selectedPillIndex>-1&&(t.model.splice(t.options.selectedPillIndex,1),0===l?t.options.selectedPillIndex=-1:t.options.selectedPillIndex>0&&t.options.selectedPillIndex--);break;case e.KEY.DELETE:t.options.selectedPillIndex>-1&&(t.model.splice(t.options.selectedPillIndex,1),0===l?t.options.selectedPillIndex=-1:t.options.selectedPillIndex>l-1&&t.options.selectedPillIndex--)}},t.$on("$destroy",function(){o.unregisterCtrl("pills")})},controller:[t]}}]),angular.module("multi-select").directive("scrollTo",[function(){function e(){}return{restrict:"A",scope:!1,require:["scrollTo"],controller:[e],link:function(e,t,n,l){var i=l[0];i.scrollTo=function(e){var n=t[0].querySelector(e);n&&n.scrollIntoViewIfNeeded()}}}}]);